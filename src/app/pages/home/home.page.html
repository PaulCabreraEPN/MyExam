<ion-header [translucent]="true" class="header">
  <ion-toolbar>
    <ion-title>Chat</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="content">
  <div class="welcome-container ion-padding">
    <p class="welcome-text">Bienvenido, <strong>{{ email }}</strong></p>
    <ion-button expand="block" color="danger" (click)="logout()" class="logout-btn">
      Cerrar Sesión
    </ion-button>
  </div>

  <ion-list class="messages-list">
    <ion-item *ngFor="let msg of messages()" lines="none" class="message-item">
      <ion-label>
        <p class="message-sender">{{ msg.sender }}</p>
        <p class="message-content">{{ msg.content }}</p>
      </ion-label>
    </ion-item>
  </ion-list>

  <ion-toolbar>
    <ion-input
      [(ngModel)]="message"
      placeholder="Escribe un mensaje..."
      (keyup.enter)="sendMessage()"
      class="message-input"
      clearInput
    ></ion-input>

    <ion-buttons slot="end">
      <!-- Botón para enviar ubicación -->
      <ion-button (click)="getLocation()" color="secondary">
        📍 Ubicación
      </ion-button>

      <button (click)="capturePhoto()">Capturar Foto</button>
      <div *ngIf="photoUrl">
        <img [src]="photoUrl" alt="Foto capturada" />
      </div>

      <!-- Botón para enviar mensaje -->
      <ion-button (click)="sendMessage()" color="primary">
        Enviar
      </ion-button>

      <!-- Botón para mostrar los Pokémon -->
      <ion-button expand="block" (click)="loadPokemons()" class="send-btn" fill="outline" color="secondary">
        Ver Pokémon
      </ion-button>

      <!-- Lista de Pokémon -->
      <ion-action-sheet
        [isOpen]="pokemons.length > 0"
        (willDismiss)="pokemons = []"
        [header]="'Selecciona un Pokémon'"
        [buttons]="pokemonButtons">
      </ion-action-sheet>
    </ion-buttons>
  </ion-toolbar>

</ion-content>

<ion-footer>
  <!-- Puedes agregar contenido adicional aquí si lo necesitas -->
</ion-footer>
